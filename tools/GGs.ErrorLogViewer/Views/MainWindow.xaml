<Window x:Class="GGs.ErrorLogViewer.Views.MainWindow" xmlns:ui="http://schemas.modernwpf.com/2019"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:GGs.ErrorLogViewer.Views"
        xmlns:models="clr-namespace:GGs.ErrorLogViewer.Models"
        xmlns:converters="clr-namespace:GGs.ErrorLogViewer.Views.Converters"
        Title="GGs Error Intelligence Center"
        Width="1280"
        Height="820"
        MinWidth="1120"
        MinHeight="700"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        ResizeMode="CanResizeWithGrip"
        Background="{DynamicResource ThemeBackgroundPrimary}">

    <Window.InputBindings>
        <KeyBinding Key="F5" Command="{Binding RefreshCommand}"/>
        <KeyBinding Key="Delete" Command="{Binding ClearLogsCommand}" Modifiers="Ctrl"/>
        <KeyBinding Key="S" Command="{Binding ExportLogsCommand}" Modifiers="Ctrl"/>
        <KeyBinding Key="C" Command="{Binding CopySelectedCommand}" Modifiers="Ctrl"/>
        <KeyBinding Key="F" Command="{Binding ClearOldLogsCommand}" Modifiers="Ctrl+Shift"/>
        <KeyBinding Key="D" Command="{Binding ToggleDetailsPaneCommand}" Modifiers="Ctrl"/>
        <KeyBinding Key="T" Command="{Binding ToggleThemeCommand}" Modifiers="Ctrl"/>
        <KeyBinding Key="R" Command="{Binding ToggleDetailsPaneCommand}" Modifiers="Alt"/>
    </Window.InputBindings>


    <Grid Background="{DynamicResource ThemeSurface}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Hero Section with Live Status -->
        <Border Grid.Row="0" Background="{DynamicResource ThemeBackgroundGradient}" CornerRadius="18" Padding="32" Margin="24,24,24,16" Effect="{DynamicResource ThemeShadow.Card}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Main Header -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel>
                        <TextBlock Text="GGs Error Intelligence Center" FontSize="28" FontWeight="Bold" Foreground="{DynamicResource ThemeTextPrimary}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                            <TextBlock Text="Enterprise-grade monitoring with real-time intelligence" Foreground="{DynamicResource ThemeTextSecondary}"/>
                            <Border Background="{DynamicResource ThemeSurfaceActive}" CornerRadius="8" Padding="8,4" Margin="16,0,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse Width="8" Height="8" Margin="0,0,6,0" VerticalAlignment="Center">
                                        <Ellipse.Style>
                                            <Style TargetType="Ellipse">
                                                <Setter Property="Fill" Value="{DynamicResource ThemeTextTertiary}"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsMonitoring}" Value="True">
                                                        <Setter Property="Fill" Value="{DynamicResource ThemeSuccess}"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Ellipse.Style>
                                    </Ellipse>
                                    <TextBlock FontSize="12" Foreground="{DynamicResource ThemeTextSecondary}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="Ready"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsMonitoring}" Value="True">
                                                        <Setter Property="Text" Value="Monitoring"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>

                    <WrapPanel Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <Button Content="Start Monitoring" Command="{Binding StartMonitoringCommand}" Margin="0,0,8,0" TabIndex="10" AutomationProperties.Name="Start monitoring"/>
                        <Button Content="Stop" Command="{Binding StopMonitoringCommand}" Margin="0,0,8,0" TabIndex="11" AutomationProperties.Name="Stop monitoring"/>
                        <Button Content="Refresh" Command="{Binding RefreshCommand}" Margin="0,0,8,0" TabIndex="12" AutomationProperties.Name="Refresh logs"/>
                        <Button Content="Clear" Command="{Binding ClearLogsCommand}" Margin="0,0,8,0" TabIndex="13" AutomationProperties.Name="Clear logs"/>
                        <Button Content="Export" Command="{Binding ExportLogsCommand}" TabIndex="14" AutomationProperties.Name="Export logs"/>
                    </WrapPanel>
                </Grid>

                <!-- Quick Actions Bar (First Run) -->
                <Border x:Name="QuickActionsBar" Grid.Row="1" Background="{DynamicResource ThemeSurfaceHover}"
                        CornerRadius="12" Padding="20" Margin="0,16,0,0" Visibility="Collapsed">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="ðŸš€" FontSize="24" VerticalAlignment="Center" Margin="0,0,16,0"/>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock Text="Welcome! Get started with these quick actions:"
                                      FontSize="14" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}"/>
                            <TextBlock Text="Monitor logs in real-time, analyze patterns, and export insights"
                                      FontSize="12" Foreground="{DynamicResource ThemeTextSecondary}" Margin="0,4,0,0"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                            <Button Content="Open Logs Folder" Command="{Binding OpenLogsFolderCommand}" Margin="0,0,8,0"/>
                            <Button Content="Import Sample" Command="{Binding ImportSampleLogCommand}" Margin="0,0,8,0"/>
                            <Button x:Name="DismissQuickActions" Content="âœ•" Width="32" Height="32"
                                   ToolTip="Dismiss" Click="DismissQuickActions_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- Filter Bar -->
        <Border Grid.Row="1" Background="{DynamicResource ThemeSurfaceHover}" CornerRadius="14" Margin="24,0,24,18" Padding="20" Effect="{DynamicResource ThemeShadow.Card}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Main Filter Row -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="SearchBox" Grid.Column="0" Margin="0,0,16,0" Height="34"
                             Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             Foreground="{DynamicResource ThemeTextPrimary}"
                             Background="{DynamicResource ThemeSurfaceActive}"
                             BorderBrush="{DynamicResource ThemeBorder}"
                             BorderThickness="1"
                             Padding="14,4"
                             ToolTip="Search message, source or raw line"
                             TabIndex="1"
                             AutomationProperties.Name="Search logs"/>

                    <ComboBox Grid.Column="1" Margin="0,0,16,0" Height="34"
                              SelectedItem="{Binding SelectedLogLevel}"
                              TabIndex="2"
                              AutomationProperties.Name="Filter by log level">
                        <ComboBox.Items>
                            <models:LogLevel>All</models:LogLevel>
                            <models:LogLevel>Verbose</models:LogLevel>
                            <models:LogLevel>Debug</models:LogLevel>
                            <models:LogLevel>Information</models:LogLevel>
                            <models:LogLevel>Warning</models:LogLevel>
                            <models:LogLevel>Error</models:LogLevel>
                            <models:LogLevel>Critical</models:LogLevel>
                        </ComboBox.Items>
                    </ComboBox>

                    <ComboBox Grid.Column="2" Margin="0,0,16,0" Height="34"
                              ItemsSource="{Binding AvailableSources}"
                              SelectedItem="{Binding SelectedSource}"
                              TabIndex="3"
                              AutomationProperties.Name="Filter by source"/>

                    <ToggleButton Grid.Column="3" Content="Regex" Style="{StaticResource FilterToggleStyle}" IsChecked="{Binding UseRegex}" ToolTip="Enable regex search" TabIndex="4" AutomationProperties.Name="Enable regex search"/>
                    <ToggleButton Grid.Column="4" Content="Smart Filter" Style="{StaticResource FilterToggleStyle}" IsChecked="{Binding SmartFilter}" ToolTip="Deduplicate similar entries" TabIndex="5" AutomationProperties.Name="Enable smart filter"/>
                    <ToggleButton Grid.Column="5" Content="Auto Scroll" Style="{StaticResource FilterToggleStyle}" IsChecked="{Binding AutoScroll}" ToolTip="Auto-scroll to new entries" TabIndex="6" AutomationProperties.Name="Enable auto scroll"/>
                    <ToggleButton Grid.Column="6" Content="Raw" Style="{StaticResource FilterToggleStyle}" IsChecked="{Binding IsRawMode}" ToolTip="Toggle raw/compact message view" TabIndex="7" AutomationProperties.Name="Toggle raw mode"/>
                </Grid>

                <!-- Secondary Controls Row -->
                <Grid Grid.Row="1" Margin="0,12,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Font Size:" Foreground="{DynamicResource ThemeTextSecondary}"
                              VerticalAlignment="Center" Margin="0,0,12,0"/>
                    <Slider Grid.Column="1" Minimum="10" Maximum="20" Value="{Binding LogFontSize}"
                           TickFrequency="1" IsSnapToTickEnabled="True" VerticalAlignment="Center"
                           ToolTip="{Binding LogFontSize, StringFormat='Font size: {0}pt'}"/>
                    <TextBlock Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center"
                              Foreground="{DynamicResource ThemeTextHint}">
                        <Run Text="Showing"/>
                        <Run Text="{Binding FilteredLogCount, Mode=OneWay}" FontWeight="SemiBold"/>
                        <Run Text="of"/>
                        <Run Text="{Binding TotalLogCount, Mode=OneWay}" FontWeight="SemiBold"/>
                        <Run Text="entries"/>
                    </TextBlock>
                </Grid>
            </Grid>
        </Border>

                <!-- Main Content -->
        <Grid Grid.Row="2" Margin="24,0,24,18">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Margin="0,0,24,0" Background="{DynamicResource ThemeSurfaceHover}" Padding="20" CornerRadius="14" Effect="{DynamicResource ThemeShadow.Card}">
                <StackPanel>
                    <TextBlock Text="Workspace" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}"/>
                    <ToggleButton x:Name="NavLogs" Content="Live Logs" Command="{Binding SwitchToLogsViewCommand}" Style="{StaticResource NavigationToggleStyle}" TabIndex="20" AutomationProperties.Name="Navigate to Live Logs">
                        <ToggleButton.IsChecked>
                            <Binding Path="ActiveView" Converter="{StaticResource StringEqualsConverter}" ConverterParameter="Logs"/>
                        </ToggleButton.IsChecked>
                    </ToggleButton>
                    <ToggleButton x:Name="NavAnalytics" Content="Analytics" Command="{Binding SwitchToAnalyticsViewCommand}" Style="{StaticResource NavigationToggleStyle}" TabIndex="21" AutomationProperties.Name="Navigate to Analytics">
                        <ToggleButton.IsChecked>
                            <Binding Path="ActiveView" Converter="{StaticResource StringEqualsConverter}" ConverterParameter="Analytics"/>
                        </ToggleButton.IsChecked>
                    </ToggleButton>
                    <ToggleButton x:Name="NavBookmarks" Content="Bookmarks" Command="{Binding SwitchToBookmarksViewCommand}" Style="{StaticResource NavigationToggleStyle}" TabIndex="22" AutomationProperties.Name="Navigate to Bookmarks">
                        <ToggleButton.IsChecked>
                            <Binding Path="ActiveView" Converter="{StaticResource StringEqualsConverter}" ConverterParameter="Bookmarks"/>
                        </ToggleButton.IsChecked>
                    </ToggleButton>
                    <ToggleButton x:Name="NavAlerts" Content="Smart Alerts" Command="{Binding SwitchToAlertsViewCommand}" Style="{StaticResource NavigationToggleStyle}" TabIndex="23" AutomationProperties.Name="Navigate to Smart Alerts">
                        <ToggleButton.IsChecked>
                            <Binding Path="ActiveView" Converter="{StaticResource StringEqualsConverter}" ConverterParameter="Alerts"/>
                        </ToggleButton.IsChecked>
                    </ToggleButton>
                    <ToggleButton x:Name="NavCompare" Content="Compare Runs" Command="{Binding SwitchToCompareViewCommand}" Style="{StaticResource NavigationToggleStyle}" TabIndex="24" AutomationProperties.Name="Navigate to Compare Runs">
                        <ToggleButton.IsChecked>
                            <Binding Path="ActiveView" Converter="{StaticResource StringEqualsConverter}" ConverterParameter="Compare"/>
                        </ToggleButton.IsChecked>
                    </ToggleButton>
                    <ToggleButton x:Name="NavExport" Content="Exports" Command="{Binding SwitchToExportViewCommand}" Style="{StaticResource NavigationToggleStyle}" TabIndex="25" AutomationProperties.Name="Navigate to Exports">
                        <ToggleButton.IsChecked>
                            <Binding Path="ActiveView" Converter="{StaticResource StringEqualsConverter}" ConverterParameter="Export"/>
                        </ToggleButton.IsChecked>
                    </ToggleButton>
                    <ToggleButton x:Name="NavSettings" Content="Settings" Command="{Binding SwitchToSettingsViewCommand}" Style="{StaticResource NavigationToggleStyle}" TabIndex="26" AutomationProperties.Name="Navigate to Settings">
                        <ToggleButton.IsChecked>
                            <Binding Path="ActiveView" Converter="{StaticResource StringEqualsConverter}" ConverterParameter="Settings"/>
                        </ToggleButton.IsChecked>
                    </ToggleButton>
                </StackPanel>
            </Border>

            <Border Grid.Column="1" Background="{DynamicResource ThemeSurfaceHover}" CornerRadius="18" Padding="24" Effect="{DynamicResource ThemeShadow.Card}">
                <ContentControl>
                    <ContentControl.Style>
                        <Style TargetType="ContentControl">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <Grid>
                                            <TextBlock Text="Choose a module from the navigation to get started." Foreground="{DynamicResource ThemeTextSecondary}" FontSize="16"/>
                                        </Grid>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>

                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ActiveView}" Value="Logs">
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" MinWidth="680"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="420"/>
                                                    </Grid.ColumnDefinitions>

                                                    <DataGrid x:Name="LogEntriesDataGrid"
                                                              ItemsSource="{Binding LogEntriesView}"
                                                              SelectedItem="{Binding SelectedLogEntry, Mode=TwoWay}"
                                                              Style="{StaticResource PremiumDataGridStyle}"
                                                              RowStyle="{StaticResource PremiumDataGridRowStyle}"
                                                              ColumnHeaderStyle="{StaticResource PremiumColumnHeaderStyle}"
                                                              FontSize="{Binding LogFontSize}"
                                                              AutoGenerateColumns="False"
                                                              IsReadOnly="True"
                                                              Margin="0,0,16,0">
                                                        <DataGrid.ContextMenu>
                                                            <ContextMenu>
                                                                <MenuItem Header="Copy Selected" Command="{Binding CopySelectedCommand}"/>
                                                                <MenuItem Header="Copy Raw" Command="{Binding CopyRawCommand}"/>
                                                                <MenuItem Header="Copy Compact" Command="{Binding CopyCompactCommand}"/>
                                                                <MenuItem Header="Copy Details" Command="{Binding CopyDetailsCommand}"/>
                                                            </ContextMenu>
                                                        </DataGrid.ContextMenu>

                                                        <DataGrid.Columns>
                                                            <DataGridTemplateColumn Header="" Width="46" IsReadOnly="True">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <Border Background="#1F2642" CornerRadius="8" Padding="12,6" HorizontalAlignment="Center">
                                                                            <ui:SymbolIcon Symbol="{Binding Level, Converter={StaticResource LogLevelToIconConverter}}"
                                                                                           Foreground="{Binding Level, Converter={StaticResource LogLevelToColorConverter}}"
                                                                                           Width="16" Height="16"/>
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                            <DataGridTextColumn Header="Timestamp" Binding="{Binding FormattedTimestamp}" Width="180"/>
                                                            <DataGridTemplateColumn Header="Source" Width="200">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <Border Background="#1F2B4F" CornerRadius="10" Padding="10,4">
                                                                            <TextBlock Text="{Binding Source}" Foreground="{Binding Source, Converter={StaticResource SourceToColorConverter}}" FontWeight="SemiBold"/>
                                                                        </Border>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                            <DataGridTemplateColumn Header="Message" Width="*">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBlock TextWrapping="Wrap" TextTrimming="CharacterEllipsis">
                                                                            <TextBlock.Text>
                                                                                <MultiBinding Converter="{StaticResource RawOrCompactMessageConverter}">
                                                                                    <Binding Path="DataContext.IsRawMode" RelativeSource="{RelativeSource AncestorType=DataGrid}"/>
                                                                                    <Binding/>
                                                                                </MultiBinding>
                                                                            </TextBlock.Text>
                                                                        </TextBlock>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                            <DataGridTemplateColumn Header="File" Width="250" Visibility="{Binding DataContext.ShowFilePathColumn, RelativeSource={RelativeSource AncestorType=DataGrid}, Converter={StaticResource BooleanToVisibilityConverter}, FallbackValue=Collapsed}">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <TextBlock Text="{Binding FilePath, TargetNullValue='â€”', FallbackValue='â€”'}"
                                                                                  Foreground="{DynamicResource ThemeTextSecondary}"
                                                                                  FontFamily="{DynamicResource ThemeFontFamilyMonospace}"
                                                                                  FontSize="11"
                                                                                  TextTrimming="CharacterEllipsis"
                                                                                  ToolTip="{Binding FilePath}"/>
                                                                    </DataTemplate>
                                                                </DataGridTemplateColumn.CellTemplate>
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>

                                                    <GridSplitter Grid.Column="1" HorizontalAlignment="Center" Margin="0,0,8,0" Width="6" Background="#1F243D"
                                                                  Visibility="{Binding IsDetailsPaneVisible, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                                                    <Border Grid.Column="2" Background="{DynamicResource ThemeSurfaceActive}" CornerRadius="16" Padding="20" BorderBrush="#202740" BorderThickness="1"
                                                            Visibility="{Binding IsDetailsPaneVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                                                            <StackPanel DataContext="{Binding SelectedLogEntry}">
                                                                <TextBlock Text="Log Entry Details" FontSize="20" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}" Margin="0,0,0,16"/>
                                                                <ContentControl Content="{Binding}">
                                                                    <ContentControl.Style>
                                                                        <Style TargetType="ContentControl">
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding}" Value="{x:Null}">
                                                                                    <Setter Property="ContentTemplate">
                                                                                        <Setter.Value>
                                                                                            <DataTemplate>
                                                                                                <TextBlock Text="Select an event to see full diagnostics." Foreground="{DynamicResource ThemeTextSecondary}" FontStyle="Italic"/>
                                                                                            </DataTemplate>
                                                                                        </Setter.Value>
                                                                                    </Setter>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </ContentControl.Style>
                                                                </ContentControl>
                                                                <StackPanel Visibility="{Binding Converter={StaticResource NullToVisibilityConverter}}">
                                                                    <TextBlock Text="{Binding Message}" Foreground="{DynamicResource ThemeTextPrimary}" TextWrapping="Wrap" Margin="0,0,0,12" FontSize="15"/>
                                                                    <TextBlock Foreground="{DynamicResource ThemeTextSecondary}">
                                                                        <Run Text="Source:"/>
                                                                        <Run Text=" "/>
                                                                        <Run Text="{Binding Source}" FontWeight="SemiBold"/>
                                                                    </TextBlock>
                                                                    <TextBlock Foreground="{DynamicResource ThemeTextSecondary}">
                                                                        <Run Text="Timestamp:"/>
                                                                        <Run Text=" "/>
                                                                        <Run Text="{Binding FormattedTimestamp}" FontWeight="SemiBold"/>
                                                                    </TextBlock>
                                                                    <TextBlock Foreground="{DynamicResource ThemeTextSecondary}">
                                                                        <Run Text="Level:"/>
                                                                        <Run Text=" "/>
                                                                        <Run Text="{Binding Level}" FontWeight="SemiBold"/>
                                                                    </TextBlock>
                                                                    <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                                                                        <ItemsControl ItemsSource="{Binding Tags}">
                                                                            <ItemsControl.ItemsPanel>
                                                                                <ItemsPanelTemplate>
                                                                                    <WrapPanel/>
                                                                                </ItemsPanelTemplate>
                                                                            </ItemsControl.ItemsPanel>
                                                                            <ItemsControl.ItemTemplate>
                                                                                <DataTemplate>
                                                                                    <Border Style="{StaticResource TagPillStyle}">
                                                                                        <TextBlock Text="{Binding Name}" Foreground="{DynamicResource ThemeTextSecondary}"/>
                                                                                    </Border>
                                                                                </DataTemplate>
                                                                            </ItemsControl.ItemTemplate>
                                                                        </ItemsControl>
                                                                    </StackPanel>
                                                                    <Expander Header="Raw Payload" Margin="0,12,0,0">
                                                                        <ScrollViewer VerticalScrollBarVisibility="Auto" Height="120">
                                                                            <TextBlock Text="{Binding RawLine}" FontFamily="Consolas" TextWrapping="Wrap" Foreground="{DynamicResource ThemeTextSecondary}"/>
                                                                        </ScrollViewer>
                                                                    </Expander>
                                                                    <Expander Header="Exception" Margin="0,12,0,0" Visibility="{Binding Exception, Converter={StaticResource NullToVisibilityConverter}}">
                                                                        <TextBlock Text="{Binding Exception}" TextWrapping="Wrap" Foreground="{DynamicResource ThemeError}"/>
                                                                    </Expander>
                                                                    <Expander Header="Stack Trace" Margin="0,12,0,0" Visibility="{Binding StackTrace, Converter={StaticResource NullToVisibilityConverter}}">
                                                                        <ScrollViewer VerticalScrollBarVisibility="Auto" Height="180">
                                                                            <TextBlock Text="{Binding StackTrace}" FontFamily="Consolas" TextWrapping="Wrap" Foreground="{DynamicResource ThemeTextSecondary}"/>
                                                                        </ScrollViewer>
                                                                    </Expander>
                                                                </StackPanel>
                                                            </StackPanel>
                                                        </ScrollViewer>
                                                    </Border>
                                                </Grid>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding ActiveView}" Value="Analytics">
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                                    <StackPanel>
                                                        <!-- Header -->
                                                        <Grid Margin="0,0,0,24">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>
                                                            <StackPanel Grid.Column="0">
                                                                <TextBlock Text="Operational Analytics" FontSize="24" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}"/>
                                                                <TextBlock Text="Real-time health metrics and anomaly detection" Margin="0,4,0,0" Foreground="{DynamicResource ThemeTextSecondary}"/>
                                                            </StackPanel>
                                                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                                <Button Content="Refresh Analytics" Command="{Binding RefreshAnalyticsCommand}" Width="160" Margin="0,0,12,0"/>
                                                                <Button Content="Detect Anomalies" Command="{Binding FindAnomaliesCommand}" Width="160" Style="{StaticResource GhostButtonStyle}"/>
                                                            </StackPanel>
                                                        </Grid>

                                                        <!-- Stat Cards -->
                                                        <Grid Margin="0,0,0,24">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>

                                                            <!-- Health Score Card -->
                                                            <Border Grid.Column="0" Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="20" Margin="0,0,12,0" Effect="{DynamicResource ThemeShadow.Card}">
                                                                <StackPanel>
                                                                    <TextBlock Text="Health Score" FontSize="13" Foreground="{DynamicResource ThemeTextSecondary}" Margin="0,0,0,8"/>
                                                                    <TextBlock Text="{Binding CurrentStatistics.HealthScore, FallbackValue='â€”', TargetNullValue='â€”'}" FontSize="36" FontWeight="Bold" Foreground="{DynamicResource ThemeSuccess}"/>
                                                                    <TextBlock Text="System Status: Healthy" FontSize="11" Foreground="{DynamicResource ThemeTextHint}" Margin="0,4,0,0"/>
                                                                </StackPanel>
                                                            </Border>

                                                            <!-- Error Count Card -->
                                                            <Border Grid.Column="1" Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="20" Margin="0,0,12,0" Effect="{DynamicResource ThemeShadow.Card}">
                                                                <StackPanel>
                                                                    <TextBlock Text="Errors" FontSize="13" Foreground="{DynamicResource ThemeTextSecondary}" Margin="0,0,0,8"/>
                                                                    <TextBlock Text="{Binding CurrentStatistics.ErrorCount, FallbackValue='0', TargetNullValue='0'}" FontSize="36" FontWeight="Bold" Foreground="{DynamicResource ThemeError}"/>
                                                                    <TextBlock Text="Last 24 hours" FontSize="11" Foreground="{DynamicResource ThemeTextHint}" Margin="0,4,0,0"/>
                                                                </StackPanel>
                                                            </Border>

                                                            <!-- Warning Count Card -->
                                                            <Border Grid.Column="2" Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="20" Margin="0,0,12,0" Effect="{DynamicResource ThemeShadow.Card}">
                                                                <StackPanel>
                                                                    <TextBlock Text="Warnings" FontSize="13" Foreground="{DynamicResource ThemeTextSecondary}" Margin="0,0,0,8"/>
                                                                    <TextBlock Text="{Binding CurrentStatistics.WarningCount, FallbackValue='0', TargetNullValue='0'}" FontSize="36" FontWeight="Bold" Foreground="{DynamicResource ThemeWarning}"/>
                                                                    <TextBlock Text="Last 24 hours" FontSize="11" Foreground="{DynamicResource ThemeTextHint}" Margin="0,4,0,0"/>
                                                                </StackPanel>
                                                            </Border>

                                                            <!-- Event Rate Card -->
                                                            <Border Grid.Column="3" Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="20" Effect="{DynamicResource ThemeShadow.Card}">
                                                                <StackPanel>
                                                                    <TextBlock Text="Event Rate" FontSize="13" Foreground="{DynamicResource ThemeTextSecondary}" Margin="0,0,0,8"/>
                                                                    <TextBlock FontSize="36" FontWeight="Bold" Foreground="{DynamicResource ThemeAccentPrimary}">
                                                                        <Run Text="{Binding CurrentStatistics.EventsPerMinute, FallbackValue='0', TargetNullValue='0', StringFormat='{}{0:F1}'}"/>
                                                                    </TextBlock>
                                                                    <TextBlock Text="events/min" FontSize="11" Foreground="{DynamicResource ThemeTextHint}" Margin="0,4,0,0"/>
                                                                </StackPanel>
                                                            </Border>
                                                        </Grid>

                                                        <!-- Top Sources -->
                                                        <Border Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="24" Margin="0,0,0,24" Effect="{DynamicResource ThemeShadow.Card}">
                                                            <StackPanel>
                                                                <TextBlock Text="Top Sources" FontSize="18" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}" Margin="0,0,0,16"/>
                                                                <ItemsControl ItemsSource="{Binding TopSources}">
                                                                    <ItemsControl.ItemTemplate>
                                                                        <DataTemplate>
                                                                            <Grid Margin="0,0,0,12">
                                                                                <Grid.ColumnDefinitions>
                                                                                    <ColumnDefinition Width="200"/>
                                                                                    <ColumnDefinition Width="*"/>
                                                                                    <ColumnDefinition Width="Auto"/>
                                                                                </Grid.ColumnDefinitions>
                                                                                <TextBlock Grid.Column="0" Text="{Binding Key}" Foreground="{DynamicResource ThemeTextPrimary}" FontWeight="SemiBold"/>
                                                                                <ProgressBar Grid.Column="1" Value="{Binding Value}" Maximum="100" Height="8" Margin="12,0" Background="{DynamicResource ThemeSurfaceActive}"/>
                                                                                <TextBlock Grid.Column="2" Text="{Binding Value}" Foreground="{DynamicResource ThemeTextSecondary}" FontFamily="{DynamicResource ThemeFontFamilyMonospace}"/>
                                                                            </Grid>
                                                                        </DataTemplate>
                                                                    </ItemsControl.ItemTemplate>
                                                                </ItemsControl>
                                                            </StackPanel>
                                                        </Border>

                                                        <!-- Log Level Distribution -->
                                                        <Border Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="24" Effect="{DynamicResource ThemeShadow.Card}">
                                                            <StackPanel>
                                                                <TextBlock Text="Log Level Distribution" FontSize="18" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}" Margin="0,0,0,16"/>
                                                                <ItemsControl ItemsSource="{Binding LogLevelDistribution}">
                                                                    <ItemsControl.ItemTemplate>
                                                                        <DataTemplate>
                                                                            <Grid Margin="0,0,0,12">
                                                                                <Grid.ColumnDefinitions>
                                                                                    <ColumnDefinition Width="120"/>
                                                                                    <ColumnDefinition Width="*"/>
                                                                                    <ColumnDefinition Width="Auto"/>
                                                                                </Grid.ColumnDefinitions>
                                                                                <TextBlock Grid.Column="0" Text="{Binding Key}" Foreground="{DynamicResource ThemeTextPrimary}"/>
                                                                                <ProgressBar Grid.Column="1" Value="{Binding Value}" Maximum="100" Height="8" Margin="12,0" Background="{DynamicResource ThemeSurfaceActive}"/>
                                                                                <TextBlock Grid.Column="2" Text="{Binding Value}" Foreground="{DynamicResource ThemeTextSecondary}" FontFamily="{DynamicResource ThemeFontFamilyMonospace}"/>
                                                                            </Grid>
                                                                        </DataTemplate>
                                                                    </ItemsControl.ItemTemplate>
                                                                </ItemsControl>
                                                            </StackPanel>
                                                        </Border>
                                                    </StackPanel>
                                                </ScrollViewer>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding ActiveView}" Value="Bookmarks">
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                                    <StackPanel>
                                                        <!-- Header -->
                                                        <Grid Margin="0,0,0,24">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>
                                                            <StackPanel Grid.Column="0">
                                                                <TextBlock Text="Bookmarked Incidents" FontSize="24" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}"/>
                                                                <TextBlock Text="Tag and organize critical log entries for later review" Margin="0,4,0,0" Foreground="{DynamicResource ThemeTextSecondary}"/>
                                                            </StackPanel>
                                                            <Button Grid.Column="1" Content="Add Bookmark" Command="{Binding AddBookmarkCommand}" Width="150"
                                                                   IsEnabled="{Binding HasSelectedLogEntry}" ToolTip="Select a log entry first"/>
                                                        </Grid>

                                                        <!-- Bookmarks List -->
                                                        <ItemsControl ItemsSource="{Binding Bookmarks}">
                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Border Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="20" Margin="0,0,0,16" Effect="{DynamicResource ThemeShadow.Card}">
                                                                        <Grid>
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="*"/>
                                                                                <ColumnDefinition Width="Auto"/>
                                                                            </Grid.ColumnDefinitions>

                                                                            <StackPanel Grid.Column="0">
                                                                                <!-- Bookmark Title -->
                                                                                <TextBlock Text="{Binding Title, FallbackValue='Untitled Bookmark'}" FontSize="16" FontWeight="SemiBold"
                                                                                          Foreground="{DynamicResource ThemeTextPrimary}" Margin="0,0,0,8"/>

                                                                                <!-- Log Entry Message -->
                                                                                <TextBlock Text="{Binding LogEntry.Message, FallbackValue='No message'}" TextWrapping="Wrap"
                                                                                          Foreground="{DynamicResource ThemeTextSecondary}" Margin="0,0,0,12"/>

                                                                                <!-- Metadata -->
                                                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                                                    <TextBlock Text="{Binding LogEntry.FormattedTimestamp, FallbackValue='â€”'}"
                                                                                              Foreground="{DynamicResource ThemeTextHint}" FontSize="12" Margin="0,0,16,0"/>
                                                                                    <TextBlock Text="{Binding LogEntry.Source, FallbackValue='â€”'}"
                                                                                              Foreground="{DynamicResource ThemeTextHint}" FontSize="12" Margin="0,0,16,0"/>
                                                                                    <TextBlock Text="{Binding LogEntry.Level, FallbackValue='â€”'}"
                                                                                              Foreground="{Binding LogEntry.LevelColor, FallbackValue={StaticResource ThemeTextHint}}" FontSize="12"/>
                                                                                </StackPanel>

                                                                                <!-- Tags -->
                                                                                <ItemsControl ItemsSource="{Binding Tags}">
                                                                                    <ItemsControl.ItemsPanel>
                                                                                        <ItemsPanelTemplate>
                                                                                            <WrapPanel/>
                                                                                        </ItemsPanelTemplate>
                                                                                    </ItemsControl.ItemsPanel>
                                                                                    <ItemsControl.ItemTemplate>
                                                                                        <DataTemplate>
                                                                                            <Border Style="{StaticResource TagPillStyle}">
                                                                                                <TextBlock Text="{Binding Name}" Foreground="{DynamicResource ThemeTextSecondary}"/>
                                                                                            </Border>
                                                                                        </DataTemplate>
                                                                                    </ItemsControl.ItemTemplate>
                                                                                </ItemsControl>
                                                                            </StackPanel>

                                                                            <!-- Actions -->
                                                                            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
                                                                                <Button Content="Go To" Command="{Binding DataContext.GoToBookmarkCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                                                       CommandParameter="{Binding}" Width="80" Margin="0,0,8,0" Style="{StaticResource GhostButtonStyle}"/>
                                                                                <Button Content="Remove" Command="{Binding DataContext.RemoveBookmarkCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                                                       CommandParameter="{Binding}" Width="80" Style="{StaticResource GhostButtonStyle}"/>
                                                                            </StackPanel>
                                                                        </Grid>
                                                                    </Border>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>

                                                        <!-- Empty State -->
                                                        <Border Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="48"
                                                               Visibility="{Binding Bookmarks.Count, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Inverse}">
                                                            <StackPanel HorizontalAlignment="Center">
                                                                <TextBlock Text="ðŸ“Œ" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                                                                <TextBlock Text="No bookmarks yet" FontSize="18" FontWeight="SemiBold"
                                                                          Foreground="{DynamicResource ThemeTextPrimary}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                                <TextBlock Text="Select a log entry and click 'Add Bookmark' to get started"
                                                                          Foreground="{DynamicResource ThemeTextSecondary}" HorizontalAlignment="Center"/>
                                                            </StackPanel>
                                                        </Border>
                                                    </StackPanel>
                                                </ScrollViewer>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding ActiveView}" Value="Alerts">
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                                    <StackPanel>
                                                        <!-- Header -->
                                                        <Grid Margin="0,0,0,24">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>
                                                            <StackPanel Grid.Column="0">
                                                                <TextBlock Text="Smart Alert Center" FontSize="24" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}"/>
                                                                <TextBlock Text="Automated alerts for error patterns and anomalies" Margin="0,4,0,0" Foreground="{DynamicResource ThemeTextSecondary}"/>
                                                            </StackPanel>
                                                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                                <Button Content="Create Alert" Command="{Binding CreateAlertCommand}" Width="140" Margin="0,0,12,0"/>
                                                                <Button Content="Clear All" Command="{Binding ClearAlertsCommand}" Width="120" Style="{StaticResource GhostButtonStyle}"/>
                                                            </StackPanel>
                                                        </Grid>

                                                        <!-- Triggered Alerts -->
                                                        <TextBlock Text="Triggered Alerts" FontSize="18" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}" Margin="0,0,0,16"/>
                                                        <ItemsControl ItemsSource="{Binding TriggeredAlerts}">
                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Border Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="20" Margin="0,0,0,16"
                                                                           BorderBrush="{DynamicResource ThemeError}" BorderThickness="2" Effect="{DynamicResource ThemeShadow.Card}">
                                                                        <Grid>
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="Auto"/>
                                                                                <ColumnDefinition Width="*"/>
                                                                                <ColumnDefinition Width="Auto"/>
                                                                            </Grid.ColumnDefinitions>

                                                                            <!-- Alert Icon -->
                                                                            <Border Grid.Column="0" Background="{DynamicResource ThemeError}" CornerRadius="12" Width="48" Height="48"
                                                                                   VerticalAlignment="Top" Margin="0,0,16,0">
                                                                                <TextBlock Text="âš " FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                            </Border>

                                                                            <!-- Alert Content -->
                                                                            <StackPanel Grid.Column="1">
                                                                                <TextBlock Text="{Binding AlertName, FallbackValue='Alert Triggered'}" FontSize="16" FontWeight="SemiBold"
                                                                                          Foreground="{DynamicResource ThemeTextPrimary}" Margin="0,0,0,8"/>
                                                                                <TextBlock Text="{Binding Pattern, FallbackValue='Pattern match detected'}" TextWrapping="Wrap"
                                                                                          Foreground="{DynamicResource ThemeTextSecondary}" Margin="0,0,0,8"/>
                                                                                <TextBlock Foreground="{DynamicResource ThemeTextHint}" FontSize="12">
                                                                                    <Run Text="Triggered at:"/>
                                                                                    <Run Text="{Binding TriggeredAt, StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}', FallbackValue='â€”'}"/>
                                                                                </TextBlock>
                                                                                <TextBlock Foreground="{DynamicResource ThemeTextHint}" FontSize="12">
                                                                                    <Run Text="Match count:"/>
                                                                                    <Run Text="{Binding MatchCount, FallbackValue='0'}" FontWeight="SemiBold"/>
                                                                                </TextBlock>
                                                                            </StackPanel>

                                                                            <!-- Actions -->
                                                                            <Button Grid.Column="2" Content="Acknowledge" Command="{Binding DataContext.AcknowledgeAlertCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                                                   CommandParameter="{Binding}" Width="120" VerticalAlignment="Center"/>
                                                                        </Grid>
                                                                    </Border>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>

                                                        <!-- Empty State for Triggered Alerts -->
                                                        <Border Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="32" Margin="0,0,0,32"
                                                               Visibility="{Binding TriggeredAlerts.Count, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Inverse}">
                                                            <StackPanel HorizontalAlignment="Center">
                                                                <TextBlock Text="âœ“" FontSize="48" Foreground="{DynamicResource ThemeSuccess}" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                                                <TextBlock Text="No active alerts" FontSize="16" Foreground="{DynamicResource ThemeTextSecondary}" HorizontalAlignment="Center"/>
                                                            </StackPanel>
                                                        </Border>

                                                        <!-- Configured Alerts -->
                                                        <TextBlock Text="Configured Alert Rules" FontSize="18" FontWeight="SemiBold" Foreground="{DynamicResource ThemeTextPrimary}" Margin="0,0,0,16"/>
                                                        <ItemsControl ItemsSource="{Binding SmartAlerts}">
                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Border Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="20" Margin="0,0,0,12" Effect="{DynamicResource ThemeShadow.Card}">
                                                                        <Grid>
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="*"/>
                                                                                <ColumnDefinition Width="Auto"/>
                                                                            </Grid.ColumnDefinitions>

                                                                            <StackPanel Grid.Column="0">
                                                                                <TextBlock Text="{Binding Name, FallbackValue='Unnamed Alert'}" FontSize="15" FontWeight="SemiBold"
                                                                                          Foreground="{DynamicResource ThemeTextPrimary}" Margin="0,0,0,6"/>
                                                                                <TextBlock Text="{Binding Pattern, FallbackValue='No pattern'}"
                                                                                          Foreground="{DynamicResource ThemeTextSecondary}" FontFamily="{DynamicResource ThemeFontFamilyMonospace}" FontSize="12"/>
                                                                                <TextBlock Margin="0,6,0,0" Foreground="{DynamicResource ThemeTextHint}" FontSize="11">
                                                                                    <Run Text="Status:"/>
                                                                                    <Run Text="{Binding IsEnabled, Converter={StaticResource BooleanToStringConverter}, ConverterParameter='Enabled|Disabled', FallbackValue='Unknown'}" FontWeight="SemiBold"/>
                                                                                </TextBlock>
                                                                            </StackPanel>

                                                                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                                                <Button Content="{Binding IsEnabled, Converter={StaticResource BooleanToStringConverter}, ConverterParameter='Disable|Enable', FallbackValue='Toggle'}"
                                                                                       Command="{Binding DataContext.EnableAlertCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                                                       CommandParameter="{Binding}" Width="80" Margin="0,0,8,0" Style="{StaticResource GhostButtonStyle}"/>
                                                                                <Button Content="Delete" Command="{Binding DataContext.DisableAlertCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                                                       CommandParameter="{Binding}" Width="80" Style="{StaticResource GhostButtonStyle}"/>
                                                                            </StackPanel>
                                                                        </Grid>
                                                                    </Border>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>

                                                        <!-- Empty State for Configured Alerts -->
                                                        <Border Background="{DynamicResource ThemeSurface}" CornerRadius="16" Padding="48"
                                                               Visibility="{Binding SmartAlerts.Count, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Inverse}">
                                                            <StackPanel HorizontalAlignment="Center">
                                                                <TextBlock Text="ðŸ””" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                                                                <TextBlock Text="No alert rules configured" FontSize="18" FontWeight="SemiBold"
                                                                          Foreground="{DynamicResource ThemeTextPrimary}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                                <TextBlock Text="Click 'Create Alert' to set up automated monitoring"
                                                                          Foreground="{DynamicResource ThemeTextSecondary}" HorizontalAlignment="Center"/>
                                                            </StackPanel>
                                                        </Border>
                                                    </StackPanel>
                                                </ScrollViewer>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding ActiveView}" Value="Compare">
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <local:CompareView/>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding ActiveView}" Value="Export">
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <local:ExportView/>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding ActiveView}" Value="Settings">
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <local:SettingsView/>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ContentControl.Style>
                </ContentControl>
            </Border>
        </Grid>
        <!-- Status bar placeholder -->
        <Border Grid.Row="3" Background="{DynamicResource ThemeSurfaceHover}" Margin="24,0,24,24" Padding="18" CornerRadius="14" BorderBrush="{DynamicResource ThemeBorder}" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding StatusMessage}" Foreground="{DynamicResource ThemeTextSecondary}"/>
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                    <TextBlock Margin="0,0,16,0">
                        <Run Text="Logs:"/>
                        <Run Text="{Binding FilteredLogCount}" FontWeight="SemiBold"/>
                        <Run Text="/"/>
                        <Run Text="{Binding TotalLogCount}" FontWeight="SemiBold"/>
                    </TextBlock>
                    <TextBlock Text="{Binding ThemeService.CurrentTheme}" Foreground="{DynamicResource ThemeTextHint}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>









